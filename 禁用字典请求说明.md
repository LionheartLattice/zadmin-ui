# 禁用字典请求修改说明

## 修改内容

### 文件: `src/router/modules/dynamicRouter.ts`

#### 修改前
```typescript
import { useOptionsStore } from '@/stores/modules/options';
...
const optionsStore = useOptionsStore();
...
optionsStore.setReloadOptions();
await optionsStore.getAllDictList();
```

#### 修改后
```typescript
// 移除了 useOptionsStore 导入
// 移除了 optionsStore 变量声明
// 注释掉了字典请求相关代码
// optionsStore.setReloadOptions();
// await optionsStore.getAllDictList();
```

## 影响范围

✅ **不再发起的请求**:
- `api/admin/sys-dict/dict` - 字典列表请求

✅ **保留的功能**:
- 菜单数据获取 (从登录接口返回)
- 按钮权限获取 (从菜单中提取)
- 角色权限获取 (从用户信息中提取)
- 动态路由初始化

## 登录流程

```
1. 用户登录
   ↓
2. 后端返回 UserWithMenu
   ↓
3. 保存 token、用户信息、菜单列表
   ↓
4. 初始化动态路由:
   - getAuthMenuList() ✅
   - getAuthButtonList() ✅
   - getAuthRoleList() ✅
   - getAllDictList() ❌ (已禁用)
   ↓
5. 添加动态路由
   ↓
6. 跳转到主页
```

## 测试验证

### 1. 启动服务
```bash
# 后端
cd D:\code\zadmin
mvn clean package -DskipTests

# 前端
cd D:\code\zadmin-ui
pnpm run dev
```

### 2. 登录测试
- 打开浏览器控制台 Network 面板
- 登录系统
- 验证不再发起 `/api/admin/sys-dict/dict` 请求

### 3. 预期结果
✅ 登录成功
✅ 菜单正常显示
✅ 权限控制正常
✅ 没有字典请求

## 如需恢复字典功能

如果将来需要恢复字典功能，只需取消注释以下代码：

```typescript
import { useOptionsStore } from '@/stores/modules/options';
...
const optionsStore = useOptionsStore();
...
optionsStore.setReloadOptions();
await optionsStore.getAllDictList();
```

## 注意事项

⚠️ 如果项目中有使用字典数据的组件，需要确保这些组件能够正常处理字典数据为空的情况。

典型使用场景：
- 下拉框选项 (Select options)
- 单选/复选框选项 (Radio/Checkbox options)
- 状态标签映射 (Status tag mapping)

建议在这些组件中添加空数据处理逻辑。

